# Google Maps Integration Setup Guide

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Google Maps –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π —Ä–æ–±–æ—Ç–æ–≤ –∏ —É–∑–ª–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- **Live Map**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤—Å–µ—Ö —Ä–æ–±–æ—Ç–æ–≤ –∏ —É–∑–ª–æ–≤ —Å–∏—Å—Ç–µ–º—ã
- **Real-time Updates**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —Ä–æ–±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ SignalR WebSocket
- **–ú–∞—Ä–∫–µ—Ä—ã —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π**:
  - **–†–æ–±–æ—Ç—ã**: –†–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ (Idle, Delivering, Charging, Maintenance)
  - **–£–∑–ª—ã**: –†–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ç–∏–ø–æ–≤ (UserNode, ChargingStation, Depot)
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: –ù–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å, –±–∞—Ç–∞—Ä–µ—è, —Ç–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–æ–±–æ—Ç–∞
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–æ–±–æ—Ç–æ–≤, —É–∑–ª–æ–≤, –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ—Å—Ç–∞–≤–æ–∫

## Backend (API)

### –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. DTOs –¥–ª—è –∫–∞—Ä—Ç—ã (`Application/DTOs/MapDTOs/`)
- `RobotMapPositionDTO.cs` - –ü–æ–∑–∏—Ü–∏—è —Ä–æ–±–æ—Ç–∞ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∏ —Å—Ç–∞—Ç—É—Å–æ–º
- `NodeMapPositionDTO.cs` - –ü–æ–∑–∏—Ü–∏—è —É–∑–ª–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- `MapDataResponseDTO.cs` - –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å —Ä–æ–±–æ—Ç–∞–º–∏ –∏ —É–∑–ª–∞–º–∏

#### 2. Map Service
- **Interface**: `Application/Abstractions/Interfaces/IMapService.cs`
- **Implementation**: `Application/Services/MapService.cs`
  - –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ—Ö —Ä–æ–±–æ—Ç–æ–≤ –∏ —É–∑–ª—ã –∏–∑ –ë–î
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–æ–±–æ—Ç–æ–≤ (CurrentLatitude, CurrentLongitude)
  - –ï—Å–ª–∏ —Ä–æ–±–æ—Ç –Ω–∞ —É–∑–ª–µ –±–µ–∑ GPS, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É–∑–ª–∞
  - –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–æ–±–æ—Ç–æ–≤ –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ

#### 3. Map Controller
- **–§–∞–π–ª**: `RobDeliveryAPI/Controllers/MapController.cs`
- **Endpoint**: `GET /api/Map/data`
- **–¢—Ä–µ–±—É–µ—Ç**: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (–ª—é–±–∞—è —Ä–æ–ª—å)
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –í—Å–µ —Ä–æ–±–æ—Ç—ã –∏ —É–∑–ª—ã —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏

#### 4. SignalR Hub
- **–§–∞–π–ª**: `RobDeliveryAPI/Hubs/MapHub.cs`
- **URL**: `wss://your-server/hubs/map`
- **–ú–µ—Ç–æ–¥—ã**:
  - `SendRobotPositionUpdate` - –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ —Ä–æ–±–æ—Ç–∞
  - `SendNodeUpdate` - –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É–∑–ª–∞
- **–°–æ–±—ã—Ç–∏—è**:
  - `ReceiveRobotUpdate` - –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–±–æ—Ç–∞
  - `ReceiveNodeUpdate` - –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞

#### 5. SignalR Integration –≤ RobotController
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ —Ä–æ–±–æ—Ç–∞ (POST /api/Robot/status):
  - –†–æ–±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ—é –ø–æ–∑–∏—Ü–∏—é
  - –°–µ—Ä–≤–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î
  - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ broadcast —á–µ—Ä–µ–∑ SignalR –≤—Å–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º**

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Backend (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

1. **Program.cs –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
   ```csharp
   // SignalR service
   builder.Services.AddSignalR();

   // Map service
   builder.Services.AddScoped<IMapService, MapService>();

   // CORS –¥–ª—è SignalR
   .SetIsOriginAllowed(_ => true)
   .AllowCredentials();

   // JWT –¥–ª—è SignalR —á–µ—Ä–µ–∑ query string
   options.Events = new JwtBearerEvents { ... }

   // Hub endpoint
   app.MapHub<MapHub>("/hubs/map");
   ```

## Frontend (React)

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```bash
npm install @vis.gl/react-google-maps @microsoft/signalr
```

- `@vis.gl/react-google-maps` - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Google Maps –¥–ª—è React
- `@microsoft/signalr` - SignalR –∫–ª–∏–µ–Ω—Ç –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. MapPage (`robdelivery-web/src/pages/MapPage.tsx`)

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SignalR Hub
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤ —Ä–æ–±–æ—Ç–æ–≤ –∏ —É–∑–ª–æ–≤
- Auto-reconnect –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –õ–µ–≥–µ–Ω–¥–∞ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
- –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–æ–±–æ—Ç–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

**–°–æ—Å—Ç–æ—è–Ω–∏–µ**:
- `robots` - –ú–∞—Å—Å–∏–≤ –ø–æ–∑–∏—Ü–∏–π —Ä–æ–±–æ—Ç–æ–≤
- `nodes` - –ú–∞—Å—Å–∏–≤ –ø–æ–∑–∏—Ü–∏–π —É–∑–ª–æ–≤
- `hubConnection` - SignalR —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

**SignalR –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏**:
```typescript
connection.on('ReceiveRobotUpdate', (robotUpdate) => {
  // –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Ä–æ–±–æ—Ç–∞ –≤ state
});

connection.on('ReceiveNodeUpdate', (nodeUpdate) => {
  // –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É–∑–ª–µ
});
```

#### 2. API Types (`robdelivery-web/src/types/index.ts`)
```typescript
interface RobotMapPosition { ... }
interface NodeMapPosition { ... }
interface MapData { robots, nodes }
```

#### 3. API Methods (`robdelivery-web/src/lib/api.ts`)
```typescript
export const mapAPI = {
  getMapData: () => api.get<MapData>('/Map/data'),
};
```

#### 4. Navigation (`robdelivery-web/src/components/Layout.tsx`)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ "Live Map" –≤ –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é
- –ò–∫–æ–Ω–∫–∞ –∫–∞—Ä—Ç—ã –∏–∑ lucide-react

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Maps API

### –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ API Key

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services > Credentials**
4. –ù–∞–∂–º–∏—Ç–µ **Create Credentials > API Key**
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫–ª—é—á

### –®–∞–≥ 2: –í–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö API

–í Google Cloud Console –≤–∫–ª—é—á–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ API:
- **Maps JavaScript API**
- **Maps SDK for Android** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **Maps SDK for iOS** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö API Key –¥–æ–±–∞–≤—å—Ç–µ **Application restrictions**:
   - HTTP referrers –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `yourdomain.com/*`)

2. –î–æ–±–∞–≤—å—Ç–µ **API restrictions**:
   - –í—ã–±–µ—Ä–∏—Ç–µ "Restrict key"
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–ª—å–∫–æ "Maps JavaScript API"

### –®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `robdelivery-web/src/pages/MapPage.tsx` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ:

```typescript
const GOOGLE_MAPS_API_KEY = 'YOUR_GOOGLE_MAPS_API_KEY';
```

–Ω–∞:

```typescript
const GOOGLE_MAPS_API_KEY = '–í–ê–®_–†–ï–ê–õ–¨–ù–´–ô_API_KEY';
```

### –®–∞–≥ 5 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ `robdelivery-web/`:

```env
VITE_GOOGLE_MAPS_API_KEY=–≤–∞—à_api_key_–∑–¥–µ—Å—å
```

–ò –æ–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥:

```typescript
const GOOGLE_MAPS_API_KEY = import.meta.env.VITE_GOOGLE_MAPS_API_KEY || 'fallback_key';
```

## –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Backend

```bash
cd RobDeliveryAPI
dotnet run
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:5102`

### Frontend

```bash
cd robdelivery-web
npm run dev
```

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:5173`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

1. **–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É** (–ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
2. **–û—Ç–∫—Ä–æ–π—Ç–µ "Live Map"** –≤ –º–µ–Ω—é
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**:
   - –ö–∞—Ä—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
   - –í–∏–¥–Ω—ã –º–∞—Ä–∫–µ—Ä—ã —É–∑–ª–æ–≤ (–∑–µ–ª–µ–Ω—ã–µ, —Å–∏–Ω–∏–µ, —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–µ)
   - –í–∏–¥–Ω—ã –º–∞—Ä–∫–µ—Ä—ã —Ä–æ–±–æ—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å —Ä–æ–±–æ—Ç—ã —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏)

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ IoT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏–ª–∏ API –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ —Ä–æ–±–æ—Ç–∞
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ POST –∑–∞–ø—Ä–æ—Å:
     ```bash
     POST /api/Robot/status
     {
       "status": "Delivering",
       "batteryLevel": 80,
       "currentLatitude": 50.4501,
       "currentLongitude": 30.5234
     }
     ```
   - –ü–æ–∑–∏—Ü–∏—è —Ä–æ–±–æ—Ç–∞ –¥–æ–ª–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –∫–∞—Ä—Ç–µ

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

```
IoT Device/Robot
    ‚Üì HTTP POST
RobotController.UpdateRobotStatus()
    ‚Üì Save to DB
RobotService.UpdateRobotStatusAsync()
    ‚Üì Broadcast
SignalR MapHub
    ‚Üì WebSocket
All Connected Clients (Browsers)
    ‚Üì Update UI
React MapPage Component
```

## –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞

### –†–æ–±–æ—Ç—ã (–ø–æ —Å—Ç–∞—Ç—É—Å—É):
- üü¢ **Green** - Idle (—Å–≤–æ–±–æ–¥–µ–Ω)
- üü† **Orange** - Delivering (–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç)
- üîµ **Blue** - Charging (–∑–∞—Ä—è–∂–∞–µ—Ç—Å—è)
- üî¥ **Red** - Maintenance (–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ)

### –£–∑–ª—ã (–ø–æ —Ç–∏–ø—É):
- üü¢ **Green** - Charging Station (–∑–∞—Ä—è–¥–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è)
- üîµ **Blue** - Depot (–¥–µ–ø–æ)
- üü£ **Purple** - User Node (–∞–¥—Ä–µ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

## API Endpoints

### GET /api/Map/data
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã (—Ä–æ–±–æ—Ç—ã + —É–∑–ª—ã)

**Response:**
```json
{
  "robots": [
    {
      "id": 1,
      "name": "Drone-001",
      "model": "DJI Mavic 3",
      "type": "Aerial",
      "status": "Delivering",
      "batteryLevel": 75.5,
      "latitude": 50.4501,
      "longitude": 30.5234,
      "currentNodeId": 5,
      "targetNodeId": 12,
      "activeOrdersCount": 2
    }
  ],
  "nodes": [
    {
      "id": 1,
      "name": "Central Depot",
      "latitude": 50.4501,
      "longitude": 30.5234,
      "type": "Depot",
      "robotsAtNode": 3
    }
  ]
}
```

## Troubleshooting

### –ö–∞—Ä—Ç–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Google Maps API Key —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –æ—à–∏–±–∫–∏ API
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Maps JavaScript API –≤–∫–ª—é—á–µ–Ω –≤ Google Cloud

### Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SignalR –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ JWT —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ query string

### –†–æ–±–æ—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É —Ä–æ–±–æ—Ç–æ–≤ –µ—Å—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (CurrentLatitude, CurrentLongitude)
- ‚úÖ –ò–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–æ–±–æ—Ç –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —É–∑–ª—É —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏

### SignalR –æ—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ JWT —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `access_token` query parameter
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ JwtBearerEvents –≤ Program.cs

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

1. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**:
   - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–æ–±–æ—Ç–æ–≤
   - –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —É–∑–ª–æ–≤
   - –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É —Ä–æ–±–æ—Ç–æ–≤

2. **–ú–∞—Ä—à—Ä—É—Ç—ã**:
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏
   - –õ–∏–Ω–∏–∏ –æ—Ç —Ä–æ–±–æ—Ç–∞ –∫ —Ü–µ–ª–µ–≤–æ–º—É —É–∑–ª—É

3. **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è**:
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –º–∞—Ä–∫–µ—Ä–æ–≤ –ø—Ä–∏ –æ—Ç–¥–∞–ª–µ–Ω–∏–∏ –∫–∞—Ä—Ç—ã

4. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ–∫–Ω–∞**:
   - Popup —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –º–∞—Ä–∫–µ—Ä

5. **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**:
   - –¢—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è —Ä–æ–±–æ—Ç–æ–≤
   - –¢–µ–ø–ª–æ–≤—ã–µ –∫–∞—Ä—Ç—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

6. **–ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–æ–±–æ—Ç–æ–≤**:
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ —Ä–æ–±–æ—Ç–∞–º —á–µ—Ä–µ–∑ –∫–∞—Ä—Ç—É
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ –∫–∞—Ä—Ç—É

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **Initial Load**: ~1-2 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- **Real-time Updates**: < 100ms –∑–∞–¥–µ—Ä–∂–∫–∞
- **SignalR Reconnect**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff
- **Map Rendering**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω Google Maps API

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö API endpoints
- ‚úÖ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è SignalR Hub
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ API Key –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–æ –¥–æ–º–µ–Ω—É
- ‚ö†Ô∏è –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ API –∫–ª—é—á–∏ –≤ Git (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ .env)
